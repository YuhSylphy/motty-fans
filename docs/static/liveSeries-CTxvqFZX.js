import{D as m}from"./datetime-BT3pVNmC.js";import{f as l,a as d,b as c,d as u}from"./base-DYZlsVTr.js";import"./pako.esm-BoIYYwlZ.js";const p=({id:{videoId:s},snippet:{description:t,publishedAt:a,title:e,thumbnails:i},liveSeriesId:n,liveStyle:r,tags:o},f,v)=>({id:s,description:t,publishedAt:m.fromISO(a).toMillis(),title:e,thumbnail:i.default,liveSeriesId:n,liveStyle:r,tags:(o==null?void 0:o.map(u("none")))??[],url:`https://www.youtube.com/watch?v=${s}`});async function J(){const[s,t,a]=await Promise.all([(async()=>{const e=await l();return Object.groupBy(e.items.filter(({liveSeriesId:i})=>i!=null).map(p),({liveSeriesId:i})=>i??(()=>{throw new Error("unexpected video record having no live-series id")})())})(),(async()=>(await d()).items)(),(async()=>{const e=await c();return new Map(e.items.map(i=>[i.id,i]))})()]);return t.map(e=>({...e,lives:e.id in s?s[e.id]??[]:[],game:e.gameId&&a.has(e.gameId)?a.get(e.gameId)??null:null}))}export{J as f};
