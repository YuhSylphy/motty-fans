import{j as c,r as d}from"./jsx-runtime-_5WuVDLK.js";import{p as C}from"./pako.esm-BoIYYwlZ.js";import{a as b,i as x,n as S,m as j}from"./ducks-B4GhlEk-.js";import{c as w,b as y,a as H,d as B,e as D}from"./hash-ChzE-5zw.js";import{j as F}from"./DefaultPropsProvider-CSjmKMGg.js";import{T,G as l}from"./TextField-BKHQXlXv.js";import{B as k}from"./Box-DH0NNVFk.js";import{P as v}from"./Paper-CR0QuJQc.js";import"./redux-toolkit.modern-J4jBE5Lh.js";import"./datetime-BT3pVNmC.js";import"./utils-Ds4Qqy87.js";import"./useTheme-BXk4qgwv.js";import"./TransitionGroupContext-OigCRaz6.js";import"./index-CTAOeIM6.js";import"./useFormControl-CkXjXPAx.js";import"./resolveComponentProps-LjkoubKo.js";import"./useSlotProps-BWWNHuKW.js";import"./Modal-x9pmWsIV.js";import"./Backdrop-Diuy1ohG.js";import"./List-Bzz6kMxx.js";import"./menu-defs-M7zDA-F1.js";import"./GlobalStyles-CG4ksUWf.js";import"./createBox-gRr0yNN2.js";const u=F(T)(({})=>({width:"100%"})),f=n=>JSON.stringify(n,null,"	"),p=w();function g(n){let o=0;console.info(`encode: ${o++}`,n);const t=j(n);console.info(`encode: ${o++}`,t);const s=JSON.stringify(t);console.info(`encode: ${o++}`,s);const a=C.deflateRaw(s,{raw:!0});console.info(`encode: ${o++}`,a);const i=y(a);console.info(`encode: ${o++}`,i);const r=H(i);return console.info(`encode: ${o++}`,r),r}function z(n){let o=0;console.info(`decode: ${o++}`,n);try{const t=B(n);console.info(`decode: ${o++}`,t);const s=D(t);console.info(`decode: ${o++}`,s);const a=C.inflateRaw(s,{to:"string",raw:!0});console.info(`decode: ${o++}`,a);const i=JSON.parse(a);if(console.info(`decode: ${o++}`,i),!x(i))throw Error(`content is not a VideoFinderCondition: ${JSON.stringify(i)}`);const r=S(i);return console.info(`decode: ${o++}`,r),r}catch(t){throw Error("failed to decode conditions hash",{cause:t})}}const J=()=>{const[n,o]=d.useState(f(p)),[t,s]=d.useState(g(p)),a=d.useCallback(({target:{value:e}})=>{s(e)},[s]),i=d.useCallback(()=>{try{const e=z(t);o(f(e))}catch(e){console.error("failed to convert",{cause:e})}},[t,o]),r=d.useCallback(({target:{value:e}})=>{o(e)},[o]),$=d.useCallback(()=>{try{const e=JSON.parse(n),m=b(e)?e:x(e)?S(e):(()=>{throw Error(`failed to convert ${JSON.stringify(e)}`)})(),h=g(m);console.info(h,e,m),s(h)}catch(e){console.error("",{cause:e})}},[n,s]);return{hash:t,dataString:n,onHashChange:a,onDataStringChange:r,onHashBlur:i,onDataStringBlur:$}};function to(){const{hash:n,dataString:o,onDataStringChange:t,onHashChange:s,onDataStringBlur:a,onHashBlur:i}=J();return c.jsx(k,{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:c.jsx(v,{sx:{width:"100%"},children:c.jsxs(l,{container:!0,children:[c.jsx(l,{item:!0,xs:12,children:c.jsx(u,{id:"hash",placeholder:"hash",value:n,onChange:s,onBlur:i})}),c.jsx(l,{item:!0,xs:12,children:c.jsx(u,{id:"data",multiline:!0,placeholder:"data",value:o,onChange:t,onBlur:a})})]})})})}export{to as default};
