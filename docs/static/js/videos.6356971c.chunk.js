"use strict";(self.webpackChunkmotty_fans=self.webpackChunkmotty_fans||[]).push([[905],{10381:function(n,e,t){t.r(e),t.d(e,{default:function(){return cn}});var i=t(36555),o=t(31303),r=t(50678),a=t(18489),s=t(72791),l=t(20890),u=t(66809),c=t(36151),d=t(72363),h=t(66647),f=t(42169),g=t(64554),m=t(81918),p=t(57621),v=t(39504),x=t(13400),b=t(26445),Z=t(61889),j=t(10703),C=t(82338),y=t(92343),w=t(47630),T=t(59468),k=t(5403),I=t(70366),M=t(73700),P=t(14771),O=t(35667),D=t(7318),A=t(69870),S=t(16871),F=t(80184),L=function(n){return"https://www.youtube.com/watch?v=".concat(n)};function B(){return(0,F.jsx)("div",{children:"Loading..."})}var W=(0,w.ZP)(l.Z)({display:"-webkit-box",overflow:"hidden",lineClamp:2,WebkitLineClamp:2,boxOrient:"vertical",WebkitBoxOrient:"vertical",fontSize:".9rem"});function z(n){var e;return(0,F.jsx)(u.Z,{title:null!==(e=n.children)&&void 0!==e?e:"",children:(0,F.jsx)(W,(0,a.Z)((0,a.Z)({},n),{},{gutterBottom:!0,variant:"h6"}))})}function H(n){var e;return(0,F.jsx)(u.Z,{title:null!==(e=n.children)&&void 0!==e?e:"",children:(0,F.jsx)(l.Z,(0,a.Z)((0,a.Z)({},n),{},{variant:"body2",color:"text.secondary",align:"right"}))})}var _=(0,w.ZP)(l.Z)({display:"-webkit-box",overflow:"hidden",lineClamp:3,WebkitLineClamp:3,boxOrient:"vertical",WebkitBoxOrient:"vertical",fontSize:".75rem"});function E(n){var e;return(0,F.jsx)(u.Z,{title:null!==(e=n.children)&&void 0!==e?e:"",children:(0,F.jsx)(_,(0,a.Z)((0,a.Z)({},n),{},{variant:"body2"}))})}function N(n){var e=n.videoId;return(0,F.jsx)(c.Z,{href:L(e),target:"_blank",referrerPolicy:"no-referrer",children:"Watch"})}var U=(0,w.ZP)(d.Z)({justifyContent:"right"});function V(n){var e=n.imageUrl,t=n.alt,i=n.videoId;return(0,F.jsx)(h.Z,{href:L(i),target:"_blank",referrerPolicy:"no-referrer",children:(0,F.jsx)(f.Z,{component:"img",src:e,alt:t})})}function G(n){var e=n.tag,t=n.deletable,i=n.findable,o=function(n,e,t){var i=(0,D.TL)(),o=(0,s.useCallback)((function(){i(A.g.addConditionTags([n]))}),[n]),r=(0,s.useCallback)((function(){i(A.g.removeConditionTags([n]))}),[n]);return{findTag:t?o:void 0,deleteTag:e?r:void 0}}(e,t,i),r=o.findTag,a=o.deleteTag;return(0,F.jsx)(Y,{label:e,size:"small",icon:i?(0,F.jsx)(k.Z,{}):void 0,clickable:i,onClick:r,onDelete:a})}var R=(0,w.ZP)(g.Z)({}),Y=(0,w.ZP)(m.Z)({fontSize:".4rem"});function q(n){var e=n.tags,t=n.deletable,i=n.findable;return(0,F.jsx)(R,{children:e.map((function(n){return(0,F.jsx)(G,{tag:n,deletable:t,findable:i},n)}))})}var J=(0,w.ZP)("div")((function(n){var e=n.theme;return{height:"0px",width:"100%",margin:"".concat(e.spacing(1)," 0")}}));function K(n){var e=n.def,t=e.thumbnails.high,i=(0,s.useMemo)((function(){return M.ou.fromMillis(e.publishedAt).setZone("Asia/Tokyo").toFormat("yyyy-MM-dd HH:mm:ss")}),[e.publishedAt]);return(0,F.jsxs)(p.Z,{children:[(0,F.jsx)(V,{imageUrl:t.url,alt:e.title,videoId:e.id}),(0,F.jsxs)(v.Z,{children:[(0,F.jsx)(q,{tags:e.tags,findable:!0}),(0,F.jsx)(J,{}),(0,F.jsx)(z,{children:e.title}),(0,F.jsx)(H,{children:i}),(0,F.jsx)(E,{children:e.description})]}),(0,F.jsx)(U,{children:(0,F.jsx)(N,{videoId:e.id})})]})}function Q(){return(0,F.jsx)(g.Z,{display:"flex",justifyContent:"flex-end",children:(0,F.jsx)(x.Z,{"aria-label":"scroll to top",component:"span",onClick:O.NY.scrollToTop,children:(0,F.jsx)(I.Z,{})})})}function X(n){var e=n.defs,t=function(n){var e=(0,s.useState)([]),t=(0,r.Z)(e,2),i=t[0],a=t[1],l=(0,s.useCallback)((function(){var e=i.length+20;n.length>e?a(n.slice(0,e)):a((0,o.Z)(n))}),[i,20,a,n]);(0,s.useEffect)((function(){l()}),[n]);var u=(0,D.rI)({xs:1,sm:2,md:3,lg:4,xl:4});return{loaded:i,fetchNext:l,itemsPerRow:u}}(e),i=t.loaded,a=t.fetchNext,l=t.itemsPerRow;return(0,F.jsx)(b.Z,{children:(0,F.jsx)(P.Z,{dataLength:i.length,next:a,hasMore:i.length<e.length,loader:(0,F.jsx)(B,{}),children:(0,F.jsx)(Z.ZP,{container:!0,spacing:2,children:i.map((function(n,e){return(0,F.jsxs)(s.Fragment,{children:[0===e||e%(3*l)!==0?null:(0,F.jsx)(Z.ZP,{item:!0,xs:12,children:(0,F.jsx)(Q,{})}),(0,F.jsx)(Z.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,F.jsx)(K,{def:n})})]},n.id)}))})})})}var $=(0,w.ZP)(j.Z)((function(n){var e=n.theme;return{marginTop:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(1)}}));function nn(n){var e=n.tagCandidates,t=function(){var n=(0,D.TL)(),e=(0,D.CG)((function(n){return n.videos})).condition,t=e.tags,i=e.dateSpan,o=i.from,l=i.to,u=(0,s.useCallback)((function(e){null===e?n(A.g.clearConditionDateFrom()):e instanceof M.ou?n(A.g.setConditionDateFrom(e.toMillis())):e instanceof Date?n(A.g.setConditionDateFrom(e)):console.error("from condition is not a date nor null",e)}),[n]),c=(0,s.useCallback)((function(e){null===e?n(A.g.clearConditionDateTo()):e instanceof M.ou?n(A.g.setConditionDateTo(e.toMillis())):e instanceof Date?n(A.g.setConditionDateTo(e)):console.error("to condition is not a date nor null",e)}),[n]),d=(0,s.useState)(""),h=(0,r.Z)(d,2),f=h[0],g=h[1],m=(0,s.useCallback)((function(n){return(0,F.jsx)(C.Z,(0,a.Z)((0,a.Z)({},n),{},{label:"\u30bf\u30b0",variant:"standard"}))}),[]),p=(0,s.useCallback)((function(e,t,i,o){if("string"===typeof t)return"blur"===i?(n(A.g.addConditionTags([t])),void g("")):void 0}),[n,g]),v=(0,s.useCallback)((function(n,e,t){"string"===typeof e&&("input"!==t||g(e))}),[g]);return{tags:t,from:null!==o?new Date(o):null,to:null!==l?new Date(l):null,autocompleteValue:f,renderTagAutocompleteInput:m,onChangeFrom:u,onChangeTo:c,onChangeTag:p,onInputChangeTag:v}}(),i=t.tags,o=t.from,u=t.to,c=t.autocompleteValue,d=t.renderTagAutocompleteInput,h=t.onChangeFrom,f=t.onChangeTo,g=t.onChangeTag,m=t.onInputChangeTag;return(0,F.jsx)(b.Z,{children:(0,F.jsxs)($,{children:[(0,F.jsx)(l.Z,{variant:"caption",children:(0,F.jsx)(k.Z,{})}),(0,F.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,F.jsxs)(Z.ZP,{item:!0,xs:12,children:[(0,F.jsx)(y.Z,{options:e,renderInput:d,autoHighlight:!0,autoSelect:!0,blurOnSelect:!0,clearOnBlur:!0,onChange:function(n,e,t,i){console.info("onChange",{event:n,value:e,reason:t,details:i}),g(n,e,t,i)},onInputChange:function(n,e,t){console.info("onInputchange",{event:n,value:e,reason:t}),m(n,e,t)},onHighlightChange:function(n,e,t){console.info("onInputchange",{event:n,option:e,reason:t})},onClose:function(n,e){console.info("onClose",{event:n,reason:e})},onOpen:function(n){console.info("onOpen",{event:n})},inputValue:c}),(0,F.jsx)(q,{tags:i,deletable:!0})]}),(0,F.jsxs)(Z.ZP,{item:!0,xs:12,children:[(0,F.jsx)(T.O,{label:"\u914d\u4fe1\u30fb\u6295\u7a3f\u65e5(from)",inputFormat:"yyyy-MM-dd",value:o,onChange:h,renderInput:function(n){return(0,F.jsx)(C.Z,(0,a.Z)({},n))},clearable:!0,showDaysOutsideCurrentMonth:!0,showTodayButton:!0,showToolbar:!0}),(0,F.jsx)(T.O,{label:"\u914d\u4fe1\u30fb\u6295\u7a3f\u65e5(to)",inputFormat:"yyyy-MM-dd",value:u,onChange:f,renderInput:function(n){return(0,F.jsx)(C.Z,(0,a.Z)({},n))},clearable:!0,showDaysOutsideCurrentMonth:!0,showTodayButton:!0,showToolbar:!0})]})]})]})})}function en(){var n=function(){var n=(0,D.TL)(),e=(0,D.CG)((function(n){return n.videos})),t=e.list,i=e.condition,r=i.tags,a=i.dateSpan,l=a.from,u=a.to,c=0===t.length;(0,s.useEffect)((function(){c&&n(A.g.init())}),[t]);var d=(0,s.useMemo)((function(){return(0,o.Z)(t.filter((function(n){return(0===r.length||r.every((function(e){return n.tags.includes(e)})))&&(null===l||l<=n.publishedAt)&&(null===u||n.publishedAt<=u)}))).sort((function(n,e){return-(n.publishedAt-e.publishedAt)}))}),[t,r,l,u]),h=Array.from(function(){var n=new Set(d.flatMap((function(n){return n.tags})));return r.forEach((function(e){return n.delete(e)})),n}().keys()).sort(),f=(0,S.UO)().hash;return{loading:c,defs:d,tagCandidates:h,hash:f}}(),e=n.loading,t=n.defs,i=n.tagCandidates;return e?(0,F.jsx)(B,{}):(0,F.jsxs)(s.Fragment,{children:[(0,F.jsx)(nn,{tagCandidates:i}),(0,F.jsx)(X,{defs:t})]})}var tn=t(33032),on=t(84322),rn=t.n(on),an=t(41441),sn=t(34013),ln={id:"dummy",publishedAt:M.ou.fromISO("2014-09-07T00:00:00Z").toMillis(),title:"dummy",description:"no videos fetched",thumbnails:{default:{url:"dummy",width:120,height:90},medium:{url:"dummy",width:320,height:180},high:{url:"dummy",width:480,height:360}},tags:[]},un=(0,an.l)((function(n){return n.pipe((0,sn.h)(A.g.init.match),(0,D.vi)("videos/fetch",(0,tn.Z)(rn().mark((function n(){return rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=A.g,n.next=3,fetch("".concat("/motty-fans","/assets/videos/videos.json")).then((function(n){return n.json()})).then((function(n){var e=n.items;return e&&e.length>0?e.map((function(n){return{id:n.id.videoId,publishedAt:M.ou.fromISO(n.snippet.publishedAt).toMillis(),title:n.snippet.title,description:n.snippet.description,thumbnails:n.snippet.thumbnails,tags:n.tags&&n.tags.length>0?(0,o.Z)(n.tags):["no tags"]}})):[ln]})).catch((function(n){return[(0,a.Z)((0,a.Z)({},ln),{},{description:n})]}));case 3:return n.t1=n.sent,n.abrupt("return",n.t0.setList.call(n.t0,n.t1));case 5:case"end":return n.stop()}}),n)})))))}),(function(n){return n.pipe((0,sn.h)(A.g.init.match),(0,D.vi)("videos/default-condition",(0,tn.Z)(rn().mark((function n(){return rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",A.g.setConditionDateFrom(M.ou.now().minus({months:3}).toMillis()));case 1:case"end":return n.stop()}}),n)})))))}));(0,i.mb)(un);var cn=function(){return(0,F.jsx)(s.Suspense,{fallback:(0,F.jsx)(B,{}),children:(0,F.jsx)(en,{})})}}}]);
//# sourceMappingURL=videos.6356971c.chunk.js.map