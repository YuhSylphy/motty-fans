(this["webpackJsonpmotty-fans"]=this["webpackJsonpmotty-fans"]||[]).push([[0],{119:function(e,n,t){"use strict";t.r(n),t.d(n,"ChangeLog",(function(){return b})),t.d(n,"changeLogActions",(function(){return m})),t.d(n,"changeLogReducer",(function(){return O})),t.d(n,"changeLogEpic",(function(){return y}));var a=t(3),r=t(274),c=t(302),o=t(158),i=t(0),l=t(148),u=t.n(l),s=t(22),f=(t(251),t(42)),d=Object(r.a)((function(e){return Object(c.a)({paper:{padding:e.spacing(1)}})})),b=function(){var e=d(),n=Object(f.a)(),t=Object(s.c)((function(e){return e.changeLog})).article;return Object(i.useEffect)((function(){n(m.init())}),[n]),Object(a.jsx)(i.Fragment,{children:Object(a.jsx)(o.a,{className:e.paper,children:""!==t?Object(a.jsx)(u.a,{source:t,className:"markdown-body"}):null})})},j=t(30),h=Object(j.b)({name:"change-log",initialState:{article:""},reducers:{init:function(){},set:function(e,n){e.article=n.payload}}}),m=h.actions,O=h.reducer,p=t(59),g=t.n(p),x=t(83),v=t(304),w=t(279),y=Object(v.a)((function(e){return e.pipe(Object(w.a)(m.init.match),Object(f.b)("change-logs/fetch",Object(x.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=m,e.next=3,fetch("".concat("/motty-fans","/assets/change-log.md")).then((function(e){return e.text()}));case 3:return e.t1=e.sent,e.abrupt("return",e.t0.set.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})))))}))},176:function(e,n,t){},252:function(e,n,t){},254:function(e,n,t){"use strict";t.r(n);var a=t(3),r=t(149),c=t(299),o=t(0),i=t.n(o),l=t(12),u=t.n(l),s=t(22),f=(t(176),t(55));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d=Object(r.a)({});u.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(c.a,{theme:d,children:Object(a.jsx)(s.a,{store:f.b,children:Object(a.jsx)(f.a,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,n,t){"use strict";t.d(n,"a",(function(){return c})),t.d(n,"c",(function(){return o})),t.d(n,"b",(function(){return M})),t.d(n,"d",(function(){return w}));var a=t(30),r=Object(a.b)({name:"horseDefs",initialState:{list:[]},reducers:{init:function(){},set:function(e,n){e.list=n.payload.list}}}),c=r.actions,o=r.reducer,i=t(59),l=t.n(i),u=t(83),s=t(304),f=t(279),d=t(42),b=t(114),j=t(47),h=t(91),m=t(154),O=t(90),p=t(277),g=t(150),x=t(278),v=t(307),w={Uk:{label:"\u4e0d\u660e(\u6307\u5b9a\u306a\u3057)"},Ec:{label:"\u30a8\u30af\u30ea\u30d7\u30b9"},Ph:{label:"\u30d5\u30a1\u30e9\u30ea\u30b9"},Ns:{label:"\u30ca\u30b9\u30eb\u30fc\u30e9"},Ro:{label:"\u30ed\u30a4\u30e4\u30eb\u30c1\u30e3\u30fc\u30b8\u30e3\u30fc"},Ne:{label:"\u30cb\u30a2\u30fc\u30af\u30c6\u30a3\u30c3\u30af"},Na:{label:"\u30cd\u30a4\u30c6\u30a3\u30f4\u30c0\u30f3\u30b5\u30fc"},Fa:{label:"\u30d5\u30a7\u30a2\u30a6\u30a7\u30a4"},To:{label:"\u30c8\u30e0\u30d5\u30fc\u30eb"},Te:{label:"\u30c6\u30c7\u30a3"},Sw:{label:"\u30b9\u30a4\u30f3\u30d5\u30a9\u30fc\u30c9"},Ha:{label:"\u30cf\u30f3\u30d7\u30c8\u30f3"},Hi:{label:"\u30d2\u30e0\u30e4\u30fc"},St:{label:"\u30bb\u30f3\u30c8\u30b5\u30a4\u30e2\u30f3"},Ma:{label:"\u30de\u30c3\u30c1\u30a7\u30e0"},He:{label:"\u30d8\u30ed\u30c9"}},y=function e(n,t){var a,r,c,o,i,l,u=t.sex,s=t.listed,f=t.childName,d=null!==(a=n.name)&&void 0!==a?a:"".concat(f).concat("female"===u?"\u6bcd":"male"===u?"\u7236":"\u89aa"),b=void 0!==n.name,j=n.father?e(n.father,{sex:"male",childName:d}):[],h=n.mother?e(n.mother,{sex:"female",childName:d}):[];return[{name:d,line:null!==(r=null!==(c=n.line)&&void 0!==c?c:null===j||void 0===j||null===(o=j[0])||void 0===o?void 0:o.line)&&void 0!==r?r:"Uk",listed:!!s,owned:!1,show:b,fatherName:null===j||void 0===j||null===(i=j[0])||void 0===i?void 0:i.name,motherName:null===h||void 0===h||null===(l=h[0])||void 0===l?void 0:l.name,memo:[],sex:u},j,h].flat()},k=function(){return fetch("".concat("/motty-fans","/assets/horse-defs.json")).then((function(e){return e.json()})).then((function(e){return e.filter((function(e){return!e.removed})).map((function(e){var n;return Object(j.a)(Object(j.a)({},e),{},{listed:!!e.listed,owned:!0,show:!0,memo:null!==(n=e.memo)&&void 0!==n?n:[]})}))}))},N=function(){return fetch("".concat("/motty-fans","/assets/broodmares.json")).then((function(e){return e.json()})).then((function(e){return e.map((function(e){return y(e,{sex:"female",listed:!0,childName:"N/A"})})).flat()}))},C=function(){return fetch("".concat("/motty-fans","/assets/stallions.json")).then((function(e){return e.json()})).then((function(e){return e.map((function(e){return y(e,{sex:"male",listed:!0,childName:"N/A"})})).flat()}))},M=Object(s.a)((function(e){return e.pipe(Object(f.a)(c.init.match),Object(d.b)("horse-defs/fetch",Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,Object(h.a)(k,C,N).pipe(Object(m.a)((function(e){return e()})),Object(O.a)(),Object(p.a)((function(e){return e.name})),Object(m.a)((function(e){return e.pipe(Object(g.a)((function(e,n){var t,a,r,c;return{name:null!==(t=e.name)&&void 0!==t?t:n.name,sex:null!==(a=e.sex)&&void 0!==a?a:n.sex,listed:e.listed||n.listed,show:e.show||n.show,owned:e.owned||n.owned,line:"Uk"===e.line?n.line:e.line,memo:[].concat(Object(b.a)(e.memo),Object(b.a)(n.memo)),fatherName:null!==(r=e.fatherName)&&void 0!==r?r:n.fatherName,motherName:null!==(c=e.motherName)&&void 0!==c?c:n.motherName}})))})),Object(x.a)(),Object(v.a)((function(e){var n=new Map(e.map((function(e){return[e.name,e]})));e.forEach((function e(t){var a,r;if(!t.line||"Uk"===t.line){if(t.fatherName){var c=n.get(t.fatherName);c?e(c):console.warn("".concat(t.fatherName,": father of ").concat(t.name," doesnt exist in list"),t,n)}t.line=null!==(a=null===(r=n.get(t.fatherName||""))||void 0===r?void 0:r.line)&&void 0!==a?a:"Uk","Uk"===t.line&&console.warn("couldnt determine line of ".concat(t.name))}}))}))).toPromise();case 3:return e.t1=e.sent,e.t2={list:e.t1},e.abrupt("return",e.t0.set.call(e.t0,e.t2));case 6:case"end":return e.stop()}}),e)})))))}))},42:function(e,n,t){"use strict";var a=t(48);t.d(n,"b",(function(){return a.d})),t.d(n,"c",(function(){return a.e}));var r=t(55);t.d(n,"a",(function(){return r.c}))},48:function(e,n,t){"use strict";t.d(n,"b",(function(){return u})),t.d(n,"c",(function(){return s})),t.d(n,"d",(function(){return O})),t.d(n,"e",(function(){return p})),t.d(n,"a",(function(){return C}));var a=t(153),r=t(151),c=t(70),o=t(47),i=t(30),l=Object(i.b)({name:"indicator",initialState:{awaits:{}},reducers:{set:function(e,n){e.awaits=n.payload},open:function(e,n){var t=n.payload;e.awaits=Object(o.a)(Object(o.a)({},e.awaits),{},Object(c.a)({},t,1+(t in e.awaits?e.awaits[t]:0)))},close:function(e,n){var t=n.payload;if(t in e.awaits){var i=e.awaits,l=i[t],u=Object(a.a)(i,[t].map(r.a));e.awaits=Object(o.a)(Object(o.a)({},u),l>1?Object(c.a)({},t,l-1):{})}else console.warn("there isnt key [".concat(t,"] in "))}}}),u=l.actions,s=l.reducer,f=t(306),d=t(91),b=t(273),j=t(154),h=u.open,m=u.close,O=function(e,n){return function(t){return t.pipe(Object(j.a)((function(t){return Object(f.a)(Object(d.a)(h(e)),Object(b.a)((function(){return n(t)})),Object(d.a)(m(e)))})))}},p=function(e){return function(n){return function(t){try{return e(h(n)),t()}finally{e(m(n))}}}},g=t(3),x=t(274),v=t(256),w=t(276),y=t(0),k=t(22),N=Object(x.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),C=function(){var e=N(),n=Object(k.c)((function(e){return e.indicator})).awaits,t=Object(y.useMemo)((function(){return Object.values(n).some((function(e){return e>0}))}),[n]);return Object(g.jsx)(v.a,{className:e.backdrop,open:t,children:Object(g.jsx)(w.a,{color:"inherit"})})}},55:function(e,n,t){"use strict";t.d(n,"b",(function(){return d})),t.d(n,"c",(function(){return j})),t.d(n,"a",(function(){return W}));var a=t(30),r=t(22),c=t(300),o=t(304),i=t(37),l=t(48),u=t(82),s=t(119),f=Object(c.a)({dependencies:{}}),d=Object(a.a)({reducer:{horseDefs:i.c,indicator:l.c,pedigree:u.c,changeLog:s.changeLogReducer},middleware:function(e){return e({thunk:!1}).concat([f])}}),b=[];!function(){b.push.apply(b,arguments),f.run(o.a.apply(void 0,b))}(i.b,s.changeLogEpic);var j=function(){return Object(r.b)()},h=t(142),m=t(3),O=t(287),p=t(288),g=t(289),x=t(293),v=t(294),w=t(295),y=t(296),k=t(63),N=t(303),C=t(53),M=t(301),S=t(298),T=t(290),U=t(291),L=t(292),P=t(297),E=t(0),F=t.n(E),D=t(11),z=t(116),A=t(42),H=function(){return Object(m.jsx)("h2",{children:"404 NOT FOUND"})},R=(t(252),function(e){return Object(m.jsxs)(O.a,{button:!0,component:z.b,to:e.path,children:[Object(m.jsx)(p.a,{children:e.icon}),Object(m.jsx)(g.a,{primary:e.label})]},e.path)}),I=[{icon:Object(m.jsx)(T.a,{}),label:"\u725d\u7cfb\u56f3",path:"/mare-line",Page:F.a.lazy((function(){return Promise.all([t.e(4),t.e(6)]).then(t.bind(null,648)).then((function(e){return{default:e.MareLine}}))}))},{icon:Object(m.jsx)(U.a,{}),label:"\u5bb6\u7cfb\u56f3(\u65e7)",path:"/family",Page:F.a.lazy((function(){return Promise.all([t.e(2),t.e(5)]).then(t.bind(null,649)).then((function(e){return{default:e.Family}}))}))},{icon:Object(m.jsx)(L.a,{}),label:"\u66f4\u65b0\u5c65\u6b74",path:"/change-log",Page:F.a.lazy((function(){return Promise.resolve().then(t.bind(null,119)).then((function(e){return{default:e.ChangeLog}}))}))}],B=function(e){var n=e.toggleMenu;return Object(m.jsx)(x.a,{onClick:n,onKeyDown:n,children:I.map(R)})},J=function(){var e=Object(E.useState)(!1),n=Object(h.a)(e,2),t=n[0],a=n[1],r=Object(E.useMemo)((function(){return function(){a(!t)}}),[t,a]);return Object(m.jsxs)(F.a.Fragment,{children:[Object(m.jsx)(v.a,{position:"static",children:Object(m.jsxs)(w.a,{children:[Object(m.jsx)(y.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:r,children:Object(m.jsx)(P.a,{})}),Object(m.jsx)(k.a,{variant:"h6",children:"MOTTV Derby"})]})}),Object(m.jsx)(N.a,{open:t,onClose:r,children:Object(m.jsx)(B,{toggleMenu:r})})]})},V=function(){var e=Object(C.a)();return Object(m.jsx)(M.a,{display:"flex",justifyContent:"flex-end",margin:e.spacing(.2),children:Object(m.jsx)(S.a,{href:"https://www.youtube.com/user/MOTTYGAMES/",target:"__blank",children:"MOTTV"})})},W=function(){var e=Object(C.a)(),n=Object(A.a)();return Object(E.useEffect)((function(){n(i.a.init())}),[n]),Object(m.jsx)(z.a,{basename:"/motty-fans",children:Object(m.jsxs)(F.a.Fragment,{children:[Object(m.jsx)(J,{}),Object(m.jsx)(M.a,{margin:e.spacing(.5),children:Object(m.jsx)(E.Suspense,{fallback:Object(m.jsx)("div",{children:"loading..."}),children:Object(m.jsxs)(D.d,{children:[I.map((function(e){var n=e.path,t=e.Page;return Object(m.jsx)(D.b,{path:n,children:Object(m.jsx)(t,{})},n)})),Object(m.jsx)(D.b,{exact:!0,path:"/",children:Object(m.jsx)(D.a,{to:"/mare-line"})},"/"),Object(m.jsx)(D.b,{children:Object(m.jsx)(H,{})},"404")]})})}),Object(m.jsx)(V,{}),Object(m.jsx)(u.a,{}),Object(m.jsx)(l.a,{})]})})}},82:function(e,n,t){"use strict";t.d(n,"b",(function(){return c})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return N}));var a=t(30),r=Object(a.b)({name:"pedigree",initialState:{displays:[]},reducers:{set:function(e,n){e.displays=n.payload},push:function(e,n){var t=n.payload;e.displays.push(t)},pop:function(e,n){e.displays.length<=0?console.warn("pedigree list is empty"):e.displays.pop()},clear:function(e,n){e.displays=[]}}}),c=r.actions,o=r.reducer,i=t(3),l=t(0),u=t(22),s=t(285),f=t(286),d=t(63),b=t(37),j=t(274),h=t(302),m=t(280),O=t(281),p=t(282),g=t(158),x=t(283),v=t(284),w=Object(j.a)((function(e){return Object(h.a)({table:{"& .cell":{backgroundColor:"gray","&.empty":{backgroundColor:"lightgray"},"&.Ec":{backgroundColor:"#ffffff"},"&.Ph":{backgroundColor:"#cfe8ff"},"&.Ns":{backgroundColor:"#00bb00"},"&.Ro":{backgroundColor:"#ffb4c8"},"&.Ne":{backgroundColor:"#fdf488"},"&.Na":{backgroundColor:"#52d8fd"},"&.Fa":{backgroundColor:"#ffc943"},"&.To":{backgroundColor:"#ff9d4b"},"&.Te":{color:e.palette.primary.contrastText,backgroundColor:"#9e57ff"},"&.Sw":{backgroundColor:"#ffe0e1"},"&.Ha":{backgroundColor:"#90ee71"},"&.Hi":{color:e.palette.primary.contrastText,backgroundColor:"#2c6aff"},"&.St":{backgroundColor:"#9e93ff"},"&.Ma":{backgroundColor:"#c5b2fe"},"&.He":{backgroundColor:"#b9f8ff"},"&.mother":{color:e.palette.primary.contrastText,backgroundColor:"#dd7165"}}}})})),y=function(e){return Object(i.jsx)(l.Fragment,{children:e.map((function(e,n){return Object(i.jsxs)(O.a,{children:[e.filter((function(e,n){return n>0})).map((function(e,t){return function(e,n,t){var a=Math.pow(2,5-n-2),r=["cell",t.show?t.line:"empty",0===n&&e===Math.pow(2,3)?["mother"]:[]].flatMap((function(e){return e})).join(" ");return Object(i.jsx)(l.Fragment,{children:e%a===0?Object(i.jsx)(m.a,{rowSpan:a,className:r,children:t.show?Object(i.jsx)(d.a,{variant:"body2",children:t.name}):null}):null},"col-".concat(n))}(n,t,e)})),n%2===0?(t=e[e.length-1].line,"Uk"!==t?Object(i.jsx)(m.a,{className:["cell",t].join(" "),rowSpan:2,children:Object(i.jsxs)(d.a,{variant:"body2",children:[b.d[t].label,"\u7cfb"]})},"col-line"):Object(i.jsx)(m.a,{className:["cell","empty"].join(" "),rowSpan:2},"col-line")):null]},"row-".concat(n));var t}))})},k=function(e){var n=e.def,t=w(),a=Object(u.c)((function(e){return e.horseDefs.list})),r=function(e){return function(n){for(var t=new Array,a=0;a<Math.pow(2,4);++a){for(var r=new Array,c=0;c<5;++c)r.push({name:"empty",generation:c,show:!1,line:"Uk"});t.push(r)}return function n(a,r,c){if(t[a][r]={name:c.name,generation:r,show:!!c.show,line:c.line},r+1<5){if(c.fatherName)n(a,r+1,e.get(c.fatherName)||{name:c.fatherName,sex:"male",line:"Uk",listed:!1,show:!0,owned:!1,memo:["\u672a\u5b9a\u7fa9"]});if(c.motherName){var o=e.get(c.motherName);n(a+Math.pow(2,5-r-2),r+1,o||{name:c.motherName,sex:"female",line:"Uk",listed:!1,show:!0,owned:!1,memo:["\u672a\u5b9a\u7fa9"]})}}}(0,0,n),t}}(Object(l.useMemo)((function(){return a.reduce((function(e,n){return e.set(n.name,n)}),new Map)}),[a]))(n);return Object(i.jsx)(p.a,{component:g.a,children:Object(i.jsx)(x.a,{className:t.table,size:"small",children:Object(i.jsx)(v.a,{children:y(r)})})})},N=function(){var e=Object(u.b)(),n=Object(u.c)((function(e){return e.pedigree})).displays,t=Object(l.useMemo)((function(){return n.length>0}),[n]),a=Object(u.c)((function(e){return e.horseDefs.list})),r=Object(l.useMemo)((function(){return n.length>0?a.find((function(e){return e.name===n[n.length-1]})):void 0}),[a,n]),o=Object(l.useMemo)((function(){return function(){e(c.clear())}}),[e]);return r?Object(i.jsxs)(s.a,{open:t,onClose:o,children:[Object(i.jsxs)(f.a,{children:[Object(i.jsxs)(d.a,{variant:"h5",children:["\u8840\u7d71\u8868: ",r.name]}),"Uk"!==r.line?Object(i.jsxs)(d.a,{variant:"h6",style:{paddingLeft:"1em"},children:["\u5927\u7cfb\u7d71: ",b.d[r.line].label,"\u7cfb"]}):null]}),Object(i.jsx)(k,{def:r})]}):null}}},[[254,1,3]]]);
//# sourceMappingURL=main.04e44abd.chunk.js.map