"use strict";(self.webpackChunkmotty_fans=self.webpackChunkmotty_fans||[]).push([[905],{10381:function(n,t,e){e.r(t),e.d(t,{default:function(){return cn}});var i=e(24727),r=e(31303),o=e(50678),a=e(18489),s=e(72791),l=e(20890),u=e(66809),c=e(36151),d=e(72363),h=e(66647),f=e(42169),g=e(68870),m=e(81918),p=e(57621),x=e(39504),v=e(13400),b=e(26445),Z=e(61889),j=e(10703),C=e(82338),y=e(92343),w=e(47630),T=e(59468),k=e(5403),M=e(70366),P=e(73700),I=e(14771),D=e(35667),A=e(7318),O=e(69870),S=e(16871),F=e(80184),L=function(n){return"https://www.youtube.com/watch?v=".concat(n)};function B(){return(0,F.jsx)("div",{children:"Loading..."})}var W=(0,w.ZP)(l.Z)({display:"-webkit-box",overflow:"hidden",lineClamp:2,WebkitLineClamp:2,boxOrient:"vertical",WebkitBoxOrient:"vertical",fontSize:".9rem"});function z(n){var t;return(0,F.jsx)(u.Z,{title:null!==(t=n.children)&&void 0!==t?t:"",children:(0,F.jsx)(W,(0,a.Z)((0,a.Z)({},n),{},{gutterBottom:!0,variant:"h6"}))})}function _(n){var t;return(0,F.jsx)(u.Z,{title:null!==(t=n.children)&&void 0!==t?t:"",children:(0,F.jsx)(l.Z,(0,a.Z)((0,a.Z)({},n),{},{variant:"body2",color:"text.secondary",align:"right"}))})}var E=(0,w.ZP)(l.Z)({display:"-webkit-box",overflow:"hidden",lineClamp:3,WebkitLineClamp:3,boxOrient:"vertical",WebkitBoxOrient:"vertical",fontSize:".75rem"});function H(n){var t;return(0,F.jsx)(u.Z,{title:null!==(t=n.children)&&void 0!==t?t:"",children:(0,F.jsx)(E,(0,a.Z)((0,a.Z)({},n),{},{variant:"body2"}))})}function N(n){var t=n.videoId;return(0,F.jsx)(c.Z,{href:L(t),target:"_blank",referrerPolicy:"no-referrer",children:"Watch"})}var R=(0,w.ZP)(d.Z)({justifyContent:"right"});function U(n){var t=n.imageUrl,e=n.alt,i=n.videoId;return(0,F.jsx)(h.Z,{href:L(i),target:"_blank",referrerPolicy:"no-referrer",children:(0,F.jsx)(f.Z,{component:"img",src:t,alt:e})})}function V(n){var t=n.tag,e=n.deletable,i=n.findable,r=function(n,t,e){var i=(0,A.TL)(),r=(0,s.useCallback)((function(){i(O.g.addConditionTags([n]))}),[n]),o=(0,s.useCallback)((function(){i(O.g.removeConditionTags([n]))}),[n]);return{findTag:e?r:void 0,deleteTag:t?o:void 0}}(t,e,i),o=r.findTag,a=r.deleteTag;return(0,F.jsx)(Y,{label:t,size:"small",icon:i?(0,F.jsx)(k.Z,{}):void 0,clickable:i,onClick:o,onDelete:a})}var G=(0,w.ZP)(g.Z)({}),Y=(0,w.ZP)(m.Z)({fontSize:".4rem"});function q(n){var t=n.tags,e=n.deletable,i=n.findable;return(0,F.jsx)(G,{children:t.map((function(n){return(0,F.jsx)(V,{tag:n,deletable:e,findable:i},n)}))})}var J=(0,w.ZP)("div")((function(n){var t=n.theme;return{height:"0px",width:"100%",margin:"".concat(t.spacing(1)," 0")}}));function K(n){var t=n.def,e=t.thumbnails.high,i=(0,s.useMemo)((function(){return P.ou.fromMillis(t.publishedAt).setZone("Asia/Tokyo").toFormat("yyyy-MM-dd HH:mm:ss")}),[t.publishedAt]);return(0,F.jsxs)(p.Z,{children:[(0,F.jsx)(U,{imageUrl:e.url,alt:t.title,videoId:t.id}),(0,F.jsxs)(x.Z,{children:[(0,F.jsx)(q,{tags:t.tags,findable:!0}),(0,F.jsx)(J,{}),(0,F.jsx)(z,{children:t.title}),(0,F.jsx)(_,{children:i}),(0,F.jsx)(H,{children:t.description})]}),(0,F.jsx)(R,{children:(0,F.jsx)(N,{videoId:t.id})})]})}function Q(){return(0,F.jsx)(g.Z,{display:"flex",justifyContent:"flex-end",children:(0,F.jsx)(v.Z,{"aria-label":"scroll to top",component:"span",onClick:D.NY.scrollToTop,children:(0,F.jsx)(M.Z,{})})})}function X(n){var t=n.defs,e=function(n){var t=(0,s.useState)([]),e=(0,o.Z)(t,2),i=e[0],a=e[1],l=(0,s.useCallback)((function(){var t=i.length+20;n.length>t?a(n.slice(0,t)):a((0,r.Z)(n))}),[i,20,a,n]);(0,s.useEffect)((function(){l()}),[n]);var u=(0,A.rI)({xs:1,sm:2,md:3,lg:4,xl:4});return{loaded:i,fetchNext:l,itemsPerRow:u}}(t),i=e.loaded,a=e.fetchNext,l=e.itemsPerRow;return(0,F.jsx)(b.Z,{children:(0,F.jsx)(I.Z,{dataLength:i.length,next:a,hasMore:i.length<t.length,loader:(0,F.jsx)(B,{}),children:(0,F.jsx)(Z.ZP,{container:!0,spacing:2,children:i.map((function(n,t){return(0,F.jsxs)(s.Fragment,{children:[0===t||t%(3*l)!==0?null:(0,F.jsx)(Z.ZP,{item:!0,xs:12,children:(0,F.jsx)(Q,{})}),(0,F.jsx)(Z.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,F.jsx)(K,{def:n})})]},n.id)}))})})})}var $=(0,w.ZP)(j.Z)((function(n){var t=n.theme;return{marginTop:t.spacing(1),marginBottom:t.spacing(1),padding:t.spacing(1)}}));function nn(n){var t=n.tagCandidates,e=function(){var n=(0,A.TL)(),t=(0,A.CG)((function(n){return n.videos})).condition,e=t.tags,i=t.dateSpan,r=i.from,l=i.to,u=(0,s.useCallback)((function(t){null===t?n(O.g.clearConditionDateFrom()):t instanceof P.ou?n(O.g.setConditionDateFrom(t.toMillis())):t instanceof Date?n(O.g.setConditionDateFrom(t)):console.error("from condition is not a date nor null",t)}),[n]),c=(0,s.useCallback)((function(t){null===t?n(O.g.clearConditionDateTo()):t instanceof P.ou?n(O.g.setConditionDateTo(t.toMillis())):t instanceof Date?n(O.g.setConditionDateTo(t)):console.error("to condition is not a date nor null",t)}),[n]),d=(0,s.useState)(""),h=(0,o.Z)(d,2),f=h[0],g=h[1],m=(0,s.useCallback)((function(n){return(0,F.jsx)(C.Z,(0,a.Z)((0,a.Z)({},n),{},{label:"\u30bf\u30b0",variant:"standard"}))}),[]),p=(0,s.useCallback)((function(t,e,i,r){if("string"===typeof e)return"blur"===i?(n(O.g.addConditionTags([e])),void g("")):void 0}),[n,g]),x=(0,s.useCallback)((function(n,t,e){"string"===typeof t&&("input"!==e||g(t))}),[g]);return{tags:e,from:null!==r?new Date(r):null,to:null!==l?new Date(l):null,autocompleteValue:f,renderTagAutocompleteInput:m,onChangeFrom:u,onChangeTo:c,onChangeTag:p,onInputChangeTag:x}}(),i=e.tags,r=e.from,u=e.to,c=e.autocompleteValue,d=e.renderTagAutocompleteInput,h=e.onChangeFrom,f=e.onChangeTo,g=e.onChangeTag,m=e.onInputChangeTag;return(0,F.jsx)(b.Z,{children:(0,F.jsxs)($,{children:[(0,F.jsx)(l.Z,{variant:"caption",children:(0,F.jsx)(k.Z,{})}),(0,F.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,F.jsxs)(Z.ZP,{item:!0,xs:12,children:[(0,F.jsx)(y.Z,{options:t,renderInput:d,autoHighlight:!0,autoSelect:!0,blurOnSelect:!0,clearOnBlur:!0,onChange:function(n,t,e,i){g(n,t,e,i)},onInputChange:function(n,t,e){m(n,t,e)},inputValue:c}),(0,F.jsx)(q,{tags:i,deletable:!0})]}),(0,F.jsxs)(Z.ZP,{item:!0,xs:12,children:[(0,F.jsx)(T.O,{label:"\u914d\u4fe1\u30fb\u6295\u7a3f\u65e5(from)",inputFormat:"yyyy-MM-dd",value:r,onChange:h,renderInput:function(n){return(0,F.jsx)(C.Z,(0,a.Z)({},n))},clearable:!0,showDaysOutsideCurrentMonth:!0,showTodayButton:!0,showToolbar:!0}),(0,F.jsx)(T.O,{label:"\u914d\u4fe1\u30fb\u6295\u7a3f\u65e5(to)",inputFormat:"yyyy-MM-dd",value:u,onChange:f,renderInput:function(n){return(0,F.jsx)(C.Z,(0,a.Z)({},n))},clearable:!0,showDaysOutsideCurrentMonth:!0,showTodayButton:!0,showToolbar:!0})]})]})]})})}function tn(){var n=function(){var n=(0,s.useRef)(!0),t=(0,A.TL)(),e=(0,A.CG)((function(n){return n.videos})),i=e.list,o=e.condition,a=o.tags,l=o.dateSpan,u=l.from,c=l.to;(0,s.useEffect)((function(){n.current&&(t(O.g.init()),n.current=!1)}),[n]);var d=(0,s.useMemo)((function(){return(0,r.Z)(i.filter((function(n){return(0===a.length||a.every((function(t){return n.tags.includes(t)})))&&(null===u||u<=n.publishedAt)&&(null===c||n.publishedAt<=c)}))).sort((function(n,t){return-(n.publishedAt-t.publishedAt)}))}),[i,a,u,c]),h=Array.from(function(){var n=new Set(d.flatMap((function(n){return n.tags})));return a.forEach((function(t){return n.delete(t)})),n}().keys()).sort(),f=(0,S.UO)().hash;return{loading:(0,s.useMemo)((function(){return 0===i.length}),[i]),defs:d,tagCandidates:h,hash:f}}(),t=n.loading,e=n.defs,i=n.tagCandidates;return t?(0,F.jsx)(B,{}):(0,F.jsxs)(s.Fragment,{children:[(0,F.jsx)(nn,{tagCandidates:i}),(0,F.jsx)(X,{defs:e})]})}var en=e(33032),rn=e(84322),on=e.n(rn),an=e(41441),sn=e(34013),ln={id:"dummy",publishedAt:P.ou.fromISO("2014-09-07T00:00:00Z").toMillis(),title:"dummy",description:"no videos fetched",thumbnails:{default:{url:"dummy",width:120,height:90},medium:{url:"dummy",width:320,height:180},high:{url:"dummy",width:480,height:360}},tags:[]},un=(0,an.l)((function(n){return n.pipe((0,sn.h)(O.g.init.match),(0,A.vi)("videos/fetch",(0,en.Z)(on().mark((function n(){return on().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=O.g,n.next=3,fetch("".concat("/motty-fans","/assets/videos/videos.json")).then((function(n){return n.json()})).then((function(n){var t=n.items;return t&&t.length>0?t.map((function(n){return{id:n.id.videoId,publishedAt:P.ou.fromISO(n.snippet.publishedAt).toMillis(),title:n.snippet.title,description:n.snippet.description,thumbnails:n.snippet.thumbnails,tags:n.tags&&n.tags.length>0?(0,r.Z)(n.tags):["no tags"]}})):[ln]})).catch((function(n){return[(0,a.Z)((0,a.Z)({},ln),{},{description:n})]}));case 3:return n.t1=n.sent,n.abrupt("return",n.t0.setList.call(n.t0,n.t1));case 5:case"end":return n.stop()}}),n)})))))}),(function(n){return n.pipe((0,sn.h)(O.g.init.match),(0,A.vi)("videos/default-condition",(0,en.Z)(on().mark((function n(){return on().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",O.g.setConditionDateFrom(P.ou.now().minus({months:3}).toMillis()));case 1:case"end":return n.stop()}}),n)})))))}));(0,i.mb)(un);var cn=function(){return(0,F.jsx)(s.Suspense,{fallback:(0,F.jsx)(B,{}),children:(0,F.jsx)(tn,{})})}}}]);
//# sourceMappingURL=videos.15b3f857.chunk.js.map