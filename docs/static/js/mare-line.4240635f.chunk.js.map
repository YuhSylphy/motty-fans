{"version":3,"file":"static/js/mare-line.4240635f.chunk.js","mappings":"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","sources":["features/horse-defs/core/epic.ts","../node_modules/@mui/lab/TreeView/TreeView.js","../node_modules/@mui/lab/TreeItem/TreeItem.js","features/mare-line/components/MareLineTree.tsx","features/mare-line/components/MareLine.tsx","features/mare-line/lazy.ts","../node_modules/@mui/icons-material/ChevronRight.js","../node_modules/@mui/icons-material/ExpandMore.js","../node_modules/@mui/icons-material/InfoOutlined.js","../node_modules/@mui/icons-material/Remove.js","../node_modules/@mui/icons-material/utils/createSvgIcon.js","../node_modules/@mui/material/utils/createChainedFunction.js","../node_modules/@mui/material/utils/deprecatedPropType.js","../node_modules/@mui/utils/esm/deprecatedPropType/deprecatedPropType.js","../node_modules/@mui/material/utils/requirePropFactory.js","../node_modules/@mui/utils/esm/requirePropFactory/requirePropFactory.js","../node_modules/@mui/material/utils/setRef.js","../node_modules/@mui/material/utils/unsupportedProp.js","../node_modules/@mui/utils/esm/unsupportedProp/unsupportedProp.js","../node_modules/@mui/material/utils/index.js","../node_modules/@mui/material/utils/ownerDocument.js","../node_modules/@mui/material/utils/useControlled.js","../node_modules/@mui/material/utils/useId.js","../node_modules/@mui/utils/esm/useControlled/useControlled.js","../node_modules/rxjs/src/internal/operators/filter.ts","../node_modules/@mui/icons-material/node_modules/@babel/runtime/helpers/interopRequireDefault.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["import { combineEpics } from 'redux-observable';\nimport { filter } from 'rxjs/operators';\n\nimport type { Epic } from 'src/app';\nimport { withIndicator } from 'src/util';\n\nimport { horseDefsActions } from '..';\nimport { fetchHorseDefs } from './horse';\n\nexport const fetchDefsEpic: Epic = (action$) =>\n\taction$.pipe(\n\t\tfilter(horseDefsActions.init.match),\n\t\twithIndicator('horse-defs/fetch', async () =>\n\t\t\thorseDefsActions.set({ list: await fetchHorseDefs() })\n\t\t)\n\t);\n\nexport const epic = combineEpics(fetchDefsEpic);\n","'use client';\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport * as React from 'react';\nlet warnedOnce = false;\nconst warn = () => {\n  if (!warnedOnce) {\n    console.warn(['MUI: The TreeView component was moved from `@mui/lab` to `@mui/x-tree-view`.', '', \"You should use `import { TreeView } from '@mui/x-tree-view'`\", \"or `import { TreeView } from '@mui/x-tree-view/TreeView'`\", '', 'More information about this migration on our blog: https://mui.com/blog/lab-tree-view-to-mui-x/.'].join('\\n'));\n    warnedOnce = true;\n  }\n};\n/**\n * @deprecated The TreeView component was moved from `@mui/lab` to `@mui/x-tree-view`. More information about this migration on our blog: https://mui.com/blog/lab-tree-view-to-mui-x/.\n * @ignore - do not document.\n */\nconst TreeView = /*#__PURE__*/React.forwardRef(function DeprecatedTreeView() {\n  warn();\n  return null;\n});\nexport default TreeView;","'use client';\n\nimport * as React from 'react';\nlet warnedOnce = false;\nconst warn = () => {\n  if (!warnedOnce) {\n    console.warn(['MUI: The TreeItem component was moved from `@mui/lab` to `@mui/x-tree-view`.', '', \"You should use `import { TreeItem } from '@mui/x-tree-view'`\", \"or `import { TreeItem } from '@mui/x-tree-view/TreeItem'`\", '', 'More information about this migration on our blog: https://mui.com/blog/lab-tree-view-to-mui-x/.'].join('\\n'));\n    warnedOnce = true;\n  }\n};\n/**\n * @deprecated The TreeItem component was moved from `@mui/lab` to `@mui/x-tree-view`. More information about this migration on our blog: https://mui.com/blog/lab-tree-view-to-mui-x/.\n * @ignore - do not document.\n */\nconst TreeItem = /*#__PURE__*/React.forwardRef(function DeprecatedTreeItem() {\n  warn();\n  return null;\n});\nexport default TreeItem;","import { IconButton } from '@mui/material';\nimport { TreeItem, TreeView } from '@mui/lab';\nimport { styled } from '@mui/material/styles';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport ChevronRightIcon from '@mui/icons-material/ChevronRight';\nimport RemoveIcon from '@mui/icons-material/Remove';\nimport InfoOutlinedIcon from '@mui/icons-material/InfoOutlined';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faMars, faQuestion, faVenus } from '@fortawesome/free-solid-svg-icons';\nimport React, { useEffect, useMemo, useState } from 'react';\n\nimport { useAppDispatch, useAppSelector, withIndicatorSync } from 'src/util';\n\nimport { HorseDef } from 'src/features/horse-defs';\nimport { pedigreeActions } from 'src/features/pedigree';\n\ntype Datum = {\n\tid: string;\n\tlabel: JSX.Element;\n\tclassName?: string;\n\tchildren: Datum[];\n\tfatherName?: string;\n\tmotherName?: string;\n\towned: boolean;\n};\n\nconst StyledTreeView = styled(TreeView)(({ theme }) => ({\n\t'& .name': {\n\t\tmarginLeft: theme.spacing(0.5),\n\t},\n\t'& .father': {\n\t\tmarginLeft: theme.spacing(1),\n\t},\n\t'& .male': {\n\t\tcolor: '#2196f3',\n\t},\n\t'& .female': {\n\t\tcolor: '#f44336',\n\t},\n\t'& .unknown': {\n\t\tcolor: '#888888',\n\t},\n}));\n\nconst InformationIcon: React.FC<{ name: string }> = ({ name }) => {\n\tconst dispatch = useAppDispatch();\n\tconst handleClick = useMemo(\n\t\t() => () => {\n\t\t\tdispatch(pedigreeActions.push(name));\n\t\t},\n\t\t[dispatch, name]\n\t);\n\n\treturn (\n\t\t<IconButton aria-label=\"horse info\" size=\"small\" onClick={handleClick}>\n\t\t\t<InfoOutlinedIcon fontSize=\"inherit\" />\n\t\t</IconButton>\n\t);\n};\n\nconst setNodeProperty = (node: Datum, def: HorseDef) => {\n\tnode.owned = node.owned || def.owned;\n\tnode.className = [def.sex].join(' ');\n\tnode.label = (\n\t\t<React.Fragment>\n\t\t\t{(() => {\n\t\t\t\tswitch (def.sex) {\n\t\t\t\t\tcase 'male':\n\t\t\t\t\t\treturn <FontAwesomeIcon icon={faMars} />;\n\t\t\t\t\tcase 'female':\n\t\t\t\t\t\treturn <FontAwesomeIcon icon={faVenus} />;\n\t\t\t\t\tcase 'unknown':\n\t\t\t\t\t\treturn <FontAwesomeIcon icon={faQuestion} />;\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tconst __exhaust: never = def.sex;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})()}\n\t\t\t<span className=\"name\">\n\t\t\t\t{def.name}\n\t\t\t\t<InformationIcon name={def.name} />\n\t\t\t</span>\n\t\t\t{def.fatherName ? (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t(\n\t\t\t\t\t<span className=\"father male\">\n\t\t\t\t\t\t{def.fatherName}\n\t\t\t\t\t\t<InformationIcon name={def.fatherName} />\n\t\t\t\t\t</span>\n\t\t\t\t\t)\n\t\t\t\t</React.Fragment>\n\t\t\t) : null}\n\t\t</React.Fragment>\n\t);\n\tnode.fatherName = def.fatherName ?? node.fatherName;\n\tnode.motherName = def.motherName ?? node.fatherName;\n};\n\nconst construct = (defs: HorseDef[]): { nodes: Datum[]; ids: string[] } => {\n\tconst map = new Map<string, Datum>();\n\n\tconst fetchOrCreateNode = (id: string) =>\n\t\tmap.get(id) ??\n\t\t(() => {\n\t\t\t// 新規\n\t\t\tconst created: Datum = {\n\t\t\t\tid,\n\t\t\t\tlabel: <React.Fragment />,\n\t\t\t\tchildren: [],\n\t\t\t\towned: false,\n\t\t\t};\n\t\t\tmap.set(id, created);\n\t\t\treturn created;\n\t\t})();\n\n\tconst append = (def: HorseDef) => {\n\t\tconst node = fetchOrCreateNode(def.name);\n\n\t\tsetNodeProperty(node, def);\n\n\t\tif (def.motherName) {\n\t\t\tconst mother = fetchOrCreateNode(def.motherName);\n\t\t\tmother.children.push(node);\n\t\t}\n\t};\n\n\tdefs.forEach(append);\n\treturn {\n\t\tnodes: Array.from(map.values()).filter(\n\t\t\t(value) =>\n\t\t\t\t// 所有馬であることは絶対条件\n\t\t\t\tvalue.owned &&\n\t\t\t\t// 母の名前がわからないか\n\t\t\t\t(!value.motherName ||\n\t\t\t\t\t// 母が登録されていないか\n\t\t\t\t\t!map.has(value.motherName) ||\n\t\t\t\t\t// 母はいるけど所有馬でないか\n\t\t\t\t\t(map.has(value.motherName) && !map.get(value.motherName)?.owned))\n\t\t),\n\t\tids: Array.from(map.keys()),\n\t};\n};\n\ntype MareLineTreeNodeProps = {\n\tnode: Datum;\n\ttoggleExpand: (node: Datum) => React.MouseEventHandler;\n};\n\nfunction MareLineTreeNode({ node, toggleExpand }: MareLineTreeNodeProps) {\n\tconst onIconClick = toggleExpand(node);\n\treturn (\n\t\t<TreeItem\n\t\t\tclassName={node.className}\n\t\t\tkey={node.id}\n\t\t\tnodeId={node.id}\n\t\t\tlabel={node.label}\n\t\t\tcollapseIcon={<ExpandMoreIcon onClick={onIconClick} />}\n\t\t\texpandIcon={<ChevronRightIcon onClick={onIconClick} />}\n\t\t\tendIcon={<RemoveIcon />}\n\t\t>\n\t\t\t{node.children\n\t\t\t\t.map((node) => ({ node, toggleExpand }))\n\t\t\t\t.map(MareLineTreeNode)}\n\t\t</TreeItem>\n\t);\n}\n\nexport const MareLineTree: React.FC = function MareLineTree() {\n\tconst dispatch = useAppDispatch();\n\tconst [expanded, setExpanded] = useState<string[]>([]);\n\n\tconst defs = useAppSelector((state) => state.horseDefs.list);\n\tconst { nodes, ids } = useMemo(() => {\n\t\tif (defs.length > 0) {\n\t\t\treturn withIndicatorSync(dispatch)('mare-line/init')(() =>\n\t\t\t\tconstruct(defs)\n\t\t\t);\n\t\t} else {\n\t\t\treturn { nodes: [], ids: [] };\n\t\t}\n\t}, [dispatch, defs]);\n\n\tuseEffect(() => {\n\t\tsetExpanded(ids);\n\t}, [setExpanded, ids]);\n\n\tconst toggleExpand = useMemo<(node: Datum) => React.MouseEventHandler>(\n\t\t() => (node) => (_event) => {\n\t\t\tsetExpanded(\n\t\t\t\texpanded.includes(node.id)\n\t\t\t\t\t? expanded.filter((id) => id !== node.id)\n\t\t\t\t\t: [...expanded, node.id]\n\t\t\t);\n\t\t},\n\t\t[expanded, setExpanded]\n\t);\n\n\treturn (\n\t\t<StyledTreeView\n\t\t\texpanded={expanded}\n\t\t\tdefaultCollapseIcon={<ExpandMoreIcon />}\n\t\t\tdefaultExpandIcon={<ChevronRightIcon />}\n\t\t\tdefaultEndIcon={<RemoveIcon />}\n\t\t>\n\t\t\t{nodes.map((node) => ({ node, toggleExpand })).map(MareLineTreeNode)}\n\t\t</StyledTreeView>\n\t);\n};\n","import React from 'react';\nimport { Paper } from '@mui/material';\nimport { styled } from '@mui/material/styles';\n\nimport { HorseDefsContainer } from 'src/features/horse-defs';\n\nimport { MareLineTree } from './MareLineTree';\n\nconst StyledPaper = styled(Paper)(({ theme }) => ({\n\tpadding: theme.spacing(2),\n}));\n\nexport function MareLine() {\n\treturn (\n\t\t<HorseDefsContainer>\n\t\t\t<StyledPaper>\n\t\t\t\t<MareLineTree />\n\t\t\t</StyledPaper>\n\t\t</HorseDefsContainer>\n\t);\n}\n","import { registerEpic } from 'src/app';\nimport { MareLine } from './components/MareLine';\nimport { epic } from 'src/features/horse-defs/core/epic';\n\nregisterEpic(epic);\n\nexport default MareLine;\n","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), 'ChevronRight');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z\"\n}), 'ExpandMore');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8\"\n}), 'InfoOutlined');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 13H5v-2h14z\"\n}), 'Remove');","\"use strict\";\n'use client';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function () {\n    return _utils.createSvgIcon;\n  }\n});\nvar _utils = require(\"@mui/material/utils\");","import createChainedFunction from '@mui/utils/createChainedFunction';\nexport default createChainedFunction;","import deprecatedPropType from '@mui/utils/deprecatedPropType';\nexport default deprecatedPropType;","export default function deprecatedPropType(validator, reason) {\n  if (process.env.NODE_ENV === 'production') {\n    return () => null;\n  }\n  return (props, propName, componentName, location, propFullName) => {\n    const componentNameSafe = componentName || '<<anonymous>>';\n    const propFullNameSafe = propFullName || propName;\n    if (typeof props[propName] !== 'undefined') {\n      return new Error(`The ${location} \\`${propFullNameSafe}\\` of ` + `\\`${componentNameSafe}\\` is deprecated. ${reason}`);\n    }\n    return null;\n  };\n}","import requirePropFactory from '@mui/utils/requirePropFactory';\nexport default requirePropFactory;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nexport default function requirePropFactory(componentNameInError, Component) {\n  if (process.env.NODE_ENV === 'production') {\n    return () => null;\n  }\n\n  // eslint-disable-next-line react/forbid-foreign-prop-types\n  const prevPropTypes = Component ? _extends({}, Component.propTypes) : null;\n  const requireProp = requiredProp => (props, propName, componentName, location, propFullName, ...args) => {\n    const propFullNameSafe = propFullName || propName;\n    const defaultTypeChecker = prevPropTypes == null ? void 0 : prevPropTypes[propFullNameSafe];\n    if (defaultTypeChecker) {\n      const typeCheckerResult = defaultTypeChecker(props, propName, componentName, location, propFullName, ...args);\n      if (typeCheckerResult) {\n        return typeCheckerResult;\n      }\n    }\n    if (typeof props[propName] !== 'undefined' && !props[requiredProp]) {\n      return new Error(`The prop \\`${propFullNameSafe}\\` of ` + `\\`${componentNameInError}\\` can only be used together with the \\`${requiredProp}\\` prop.`);\n    }\n    return null;\n  };\n  return requireProp;\n}","import setRef from '@mui/utils/setRef';\nexport default setRef;","import unsupportedProp from '@mui/utils/unsupportedProp';\nexport default unsupportedProp;","export default function unsupportedProp(props, propName, componentName, location, propFullName) {\n  if (process.env.NODE_ENV === 'production') {\n    return null;\n  }\n  const propFullNameSafe = propFullName || propName;\n  if (typeof props[propName] !== 'undefined') {\n    return new Error(`The prop \\`${propFullNameSafe}\\` is not supported. Please remove it.`);\n  }\n  return null;\n}","'use client';\n\nimport { unstable_ClassNameGenerator as ClassNameGenerator } from '@mui/utils';\nexport { default as capitalize } from './capitalize';\nexport { default as createChainedFunction } from './createChainedFunction';\nexport { default as createSvgIcon } from './createSvgIcon';\nexport { default as debounce } from './debounce';\nexport { default as deprecatedPropType } from './deprecatedPropType';\nexport { default as isMuiElement } from './isMuiElement';\nexport { default as ownerDocument } from './ownerDocument';\nexport { default as ownerWindow } from './ownerWindow';\nexport { default as requirePropFactory } from './requirePropFactory';\nexport { default as setRef } from './setRef';\nexport { default as unstable_useEnhancedEffect } from './useEnhancedEffect';\nexport { default as unstable_useId } from './useId';\nexport { default as unsupportedProp } from './unsupportedProp';\nexport { default as useControlled } from './useControlled';\nexport { default as useEventCallback } from './useEventCallback';\nexport { default as useForkRef } from './useForkRef';\nexport { default as useIsFocusVisible } from './useIsFocusVisible';\n// TODO: remove this export once ClassNameGenerator is stable\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport const unstable_ClassNameGenerator = {\n  configure: generator => {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(['MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.', '', \"You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead\", '', 'The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401', '', 'The updated documentation: https://mui.com/guides/classname-generator/'].join('\\n'));\n    }\n    ClassNameGenerator.configure(generator);\n  }\n};","import ownerDocument from '@mui/utils/ownerDocument';\nexport default ownerDocument;","'use client';\n\nimport useControlled from '@mui/utils/useControlled';\nexport default useControlled;","'use client';\n\nimport useId from '@mui/utils/useId';\nexport default useId;","'use client';\n\n/* eslint-disable react-hooks/rules-of-hooks, react-hooks/exhaustive-deps */\nimport * as React from 'react';\nexport default function useControlled({\n  controlled,\n  default: defaultProp,\n  name,\n  state = 'value'\n}) {\n  // isControlled is ignored in the hook dependency lists as it should never change.\n  const {\n    current: isControlled\n  } = React.useRef(controlled !== undefined);\n  const [valueState, setValue] = React.useState(defaultProp);\n  const value = isControlled ? controlled : valueState;\n  if (process.env.NODE_ENV !== 'production') {\n    React.useEffect(() => {\n      if (isControlled !== (controlled !== undefined)) {\n        console.error([`MUI: A component is changing the ${isControlled ? '' : 'un'}controlled ${state} state of ${name} to be ${isControlled ? 'un' : ''}controlled.`, 'Elements should not switch from uncontrolled to controlled (or vice versa).', `Decide between using a controlled or uncontrolled ${name} ` + 'element for the lifetime of the component.', \"The nature of the state is determined during the first render. It's considered controlled if the value is not `undefined`.\", 'More info: https://fb.me/react-controlled-components'].join('\\n'));\n      }\n    }, [state, name, controlled]);\n    const {\n      current: defaultValue\n    } = React.useRef(defaultProp);\n    React.useEffect(() => {\n      if (!isControlled && !Object.is(defaultValue, defaultProp)) {\n        console.error([`MUI: A component is changing the default ${state} state of an uncontrolled ${name} after being initialized. ` + `To suppress this warning opt to use a controlled ${name}.`].join('\\n'));\n      }\n    }, [JSON.stringify(defaultProp)]);\n  }\n  const setValueIfUncontrolled = React.useCallback(newValue => {\n    if (!isControlled) {\n      setValue(newValue);\n    }\n  }, []);\n  return [value, setValueIfUncontrolled];\n}","import { OperatorFunction, MonoTypeOperatorFunction, TruthyTypesOf } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/** @deprecated Use a closure instead of a `thisArg`. Signatures accepting a `thisArg` will be removed in v8. */\nexport function filter<T, S extends T, A>(predicate: (this: A, value: T, index: number) => value is S, thisArg: A): OperatorFunction<T, S>;\nexport function filter<T, S extends T>(predicate: (value: T, index: number) => value is S): OperatorFunction<T, S>;\nexport function filter<T>(predicate: BooleanConstructor): OperatorFunction<T, TruthyTypesOf<T>>;\n/** @deprecated Use a closure instead of a `thisArg`. Signatures accepting a `thisArg` will be removed in v8. */\nexport function filter<T, A>(predicate: (this: A, value: T, index: number) => boolean, thisArg: A): MonoTypeOperatorFunction<T>;\nexport function filter<T>(predicate: (value: T, index: number) => boolean): MonoTypeOperatorFunction<T>;\n\n/**\n * Filter items emitted by the source Observable by only emitting those that\n * satisfy a specified predicate.\n *\n * <span class=\"informal\">Like\n * [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter),\n * it only emits a value from the source if it passes a criterion function.</span>\n *\n * ![](filter.png)\n *\n * Similar to the well-known `Array.prototype.filter` method, this operator\n * takes values from the source Observable, passes them through a `predicate`\n * function and only emits those values that yielded `true`.\n *\n * ## Example\n *\n * Emit only click events whose target was a DIV element\n *\n * ```ts\n * import { fromEvent, filter } from 'rxjs';\n *\n * const div = document.createElement('div');\n * div.style.cssText = 'width: 200px; height: 200px; background: #09c;';\n * document.body.appendChild(div);\n *\n * const clicks = fromEvent(document, 'click');\n * const clicksOnDivs = clicks.pipe(filter(ev => (<HTMLElement>ev.target).tagName === 'DIV'));\n * clicksOnDivs.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n * @see {@link ignoreElements}\n * @see {@link partition}\n * @see {@link skip}\n *\n * @param predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted, if `false` the value is not passed to the output\n * Observable. The `index` parameter is the number `i` for the i-th source\n * emission that has happened since the subscription, starting from the number\n * `0`.\n * @param thisArg An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return A function that returns an Observable that emits items from the\n * source Observable that satisfy the specified `predicate`.\n */\nexport function filter<T>(predicate: (value: T, index: number) => boolean, thisArg?: any): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    // An index passed to our predicate function on each call.\n    let index = 0;\n\n    // Subscribe to the source, all errors and completions are\n    // forwarded to the consumer.\n    source.subscribe(\n      // Call the predicate with the appropriate `this` context,\n      // if the predicate returns `true`, then send the value\n      // to the consumer.\n      createOperatorSubscriber(subscriber, (value) => predicate.call(thisArg, value, index++) && subscriber.next(value))\n    );\n  });\n}\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"names":["epic","combineEpics","action$","pipe","filter","horseDefsActions","withIndicator","fetchHorseDefs","list","set","warnedOnce","React","console","warn","join","StyledTreeView","styled","TreeView","theme","marginLeft","spacing","color","InformationIcon","name","dispatch","useAppDispatch","handleClick","useMemo","pedigreeActions","IconButton","size","onClick","InfoOutlined","fontSize","construct","defs","map","Map","fetchOrCreateNode","id","get","created","label","children","owned","forEach","def","node","className","sex","icon","faMars","faVenus","faQuestion","fatherName","motherName","setNodeProperty","push","nodes","Array","from","values","value","has","ids","keys","MareLineTreeNode","toggleExpand","onIconClick","nodeId","collapseIcon","ExpandMore","expandIcon","ChevronRight","endIcon","Remove","MareLineTree","useState","expanded","setExpanded","useAppSelector","state","horseDefs","length","withIndicatorSync","useEffect","_event","includes","defaultCollapseIcon","defaultExpandIcon","defaultEndIcon","StyledPaper","Paper","padding","registerEpic","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","default","jsx","d","Object","defineProperty","enumerable","_utils","createSvgIcon","validator","reason","componentNameInError","Component","props","propName","componentName","location","propFullName","unstable_ClassNameGenerator","configure","generator","ClassNameGenerator","ownerDocument","useControlled","useId","controlled","defaultProp","isControlled","undefined","current","valueState","setValue","newValue","predicate","thisArg","operate","source","subscriber","index","subscribe","createOperatorSubscriber","call","next","module","obj","__esModule","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err"],"sourceRoot":""}